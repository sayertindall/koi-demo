services:
  - type: web
    name: koi-coordinator
    env: docker
    build:
      context: ./nodes/koi-net-coordinator-node
      dockerfilePath: Dockerfile
    envVars:
      - fromGroup: koi-env
    plan: free
    autoDeploy: false

  - type: web
    name: koi-github-sensor
    env: docker
    build:
      context: ./nodes/koi-net-github-sensor-node
      dockerfilePath: Dockerfile
    envVars:
      - fromGroup: koi-env
    plan: free
    autoDeploy: false

  - type: web
    name: koi-hackmd-sensor
    env: docker
    build:
      context: ./nodes/koi-net-hackmd-sensor-node
      dockerfilePath: Dockerfile
    envVars:
      - fromGroup: koi-env
    plan: free
    autoDeploy: false

  - type: web
    name: koi-processor-a
    env: docker
    build:
      context: ./nodes/koi-net-processor-a-node
      dockerfilePath: Dockerfile
    envVars:
      - fromGroup: koi-env
    plan: free
    autoDeploy: false

  - type: web
    name: koi-processor-b
    env: docker
    build:
      context: ./nodes/koi-net-processor-b-node
      dockerfilePath: Dockerfile
    envVars:
      - fromGroup: koi-env
    plan: free
    autoDeploy: false

envVarGroups:
  - name: koi-env
    envVars:
      - key: GITHUB_TOKEN
        value: <github-token>
      - key: HACKMD_TOKEN
        value: <hackmd-token>
      - key: GITHUB_WEBHOOK_SECRET
        value: <github-webhook-secret>
      - key: RID_CACHE_DIR
        value: /data/cache
      - key: SUBNET_ID
        value: demo-subnet
      - key: RUN_CONTEXT
        value: docker
      - key: KOI_CONFIG_MODE
        value: docker
